{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./src/background/handleTcRequest.js","webpack:///external \"_\"","webpack:///./src/background/background.js","webpack:///./src/background/background/helpers.js","webpack:///./src/background/background/putGlossariesInWindow.js","webpack:///./src/background/background/putGlossariesInWindow/persistFontSize.js","webpack:///./src/background/background/putGlossariesInWindow/htmlHeadBody.js","webpack:///./src/background/background/putGlossariesInWindow/hideDefinitionsStuff.js","webpack:///./src/background/background/putGlossariesInWindow/removeAndUpdateDatastore.js","webpack:///./src/background/background/getFingerprint.js","webpack:///./src/background/contextMenu/index.js","webpack:///./src/background/background/putGlossariesInWindow/checkIfGlossaryWindowIsOpen.js","webpack:///./src/background/background/systemInfo.js"],"names":["handleTcRequest","debug","require","__filename","info","tab","log","menuItemId","JSON","stringify","chrome","tabs","sendMessage","id","res","warn","abc","escape","payload","language","window","open","replace","Storage","fingerprint","runtime","onUpdateAvailable","addListener","reload","API_DOMAIN","API_URL","LATEST_VERSION_FILE","onMessage","req","sender","sendResponse","common","user","header","_gaq","push","obj","eventCategory","eventAction","body","Boolean","get","data","done","fail","error","ajax","Object","assign","text","suffix","create","getURL","openOptionsPage","type","name","key","set","value","keys","remove","getChromeVersion","raw","navigator","userAgent","match","parseInt","getExtensionVersion","getManifest","version","doneHandler","errorHandler","putGlossariesInWindow","content","wind","screen","height","width","document","head","innerHTML","on","undefined","e","find","click","blur","persistFontSize","count","doc","$incr","$decr","$body","localStorage","put","numPx","storedSize","css","_change","symbol","fontSize","modifier","getHead","getBody","hideDefinitionsStuff","state","stored","$desc","$cthCompress","hide","toggle","removeAndUpdateDatastore","NewStorage","createInstance","getItem","attr","then","existingEntry","lastUpdated","setItem","keyName","getFingerprint","cb","result","components","contexts","title","contextMenus","checkIfGlossaryWindowIsOpen","getCpuInfo","system","cpu","getInfo","getMemInfo","memory"],"mappings":"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","file":"background.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 0 1 2","import goat from 'escape-goat'\r\n\r\nconst debug = require('cth-debug')(__filename)\r\n\r\nexport function handleTcRequest(info, tab) {\r\n   debug.log(`item ${info.menuItemId} was clicked`)\r\n   debug.log(`info: ${JSON.stringify(info, 0, 3)}`)\r\n   debug.log(`tab: ${JSON.stringify(tab, 0, 3)}`)\r\n\r\n   chrome.tabs.sendMessage(tab.id, \"tcLookup\", (res) => {\r\n      debug.warn(res)\r\n      const abc = `https://www.google.com/transconsole/externaltc/btviewer/searchresult?SearchText=${goat.escape(res.payload)}&SearchField=search_field_src&SearchType=search_type_token_and_phrase&ProductSelect=&LanguagesSelected=${res.language}&TranslationFilterStatus=translated&TranslationFilterAnyOrAll=any&TranslationFilterStage=LEVERAGED&ShowTranslationStage=showTranslationStage&CreatedAfter=&CreatedBefore=&ResourcesFilter=&IncludeObsolete=obsolete`\r\n      window.open(abc)\r\n   })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/background/handleTcRequest.js","module.exports = _;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"_\"\n// module id = 2\n// module chunks = 0 1 2","/* global _gaq chrome */\nimport $ from 'jquery'\nimport {doneHandler, errorHandler, getChromeVersion, getExtensionVersion} from './background/helpers'\nimport putGlossariesInWindow from './background/putGlossariesInWindow'\nimport getFingerprint from './background/getFingerprint'\nimport {loadAnalytics} from '../workbench/5_init/init/analytics'\nimport './contextMenu'\nimport checkIfGlossaryWindowIsOpen from './background/putGlossariesInWindow/checkIfGlossaryWindowIsOpen'\n// TODO: Implement for some statistics purpose ...\nimport {getCpuInfo, getMemInfo} from './background/systemInfo'\nimport {handleTcRequest} from './handleTcRequest'\n\nconst debug = require('cth-debug')(__filename.replace(/^src\\//, ''))\nwindow.Storage = require('../model/GeneralStorage').Storage\n\nloadAnalytics()\n\ngetMemInfo((res) => {\n\n   debug.log(res)\n\n})\ngetCpuInfo((res) => {\n\n   debug.log(res)\n\n})\n\nlet fingerprint\ngetFingerprint((res) => {\n\n   fingerprint = res\n\n})\n\n// Update extension when update is available, by calling for the background page to reload\nchrome.runtime.onUpdateAvailable.addListener(() => {\n\n   chrome.runtime.reload()\n\n})\n\nconst API_DOMAIN = require('../../cth_modules/cth-config/index').API_URL\n\nconst LATEST_VERSION_FILE = 'latest.json'\n\nchrome.runtime.onMessage.addListener((req, sender, sendResponse) => {\n\n   debug.log('Req with content', req, ' received from content page')\n\n   const common = {\n      \"extensionVersion\": getExtensionVersion(),\n      \"chromeVersion\": getChromeVersion(),\n      \"user\": req.user,\n      fingerprint\n   }\n\n   switch (req.header) {\n\n      case 'click':\n         debug.log('Sending GA ...')\n         _gaq.push([\n            '_trackEvent',\n            req.obj.eventCategory,\n            req.obj.eventAction\n         ])\n         return true\n      case 'glossaries':\n         debug.log('Putting glossaries in window ...')\n         putGlossariesInWindow(req.body)\n         return true\n      case 'glossaryWindowExists':\n         debug.log('Checking for existence of glossaries window')\n         sendResponse(Boolean(checkIfGlossaryWindowIsOpen()))\n         return true\n      case 'latest version':\n         debug.log('Sending $.get request')\n\n         $.get(`${API_DOMAIN}/${LATEST_VERSION_FILE}`, (data) => {\n\n            sendResponse(data)\n            debug.log('Succeeded in checking latest.json on server')\n\n         }).done((res) => doneHandler(res, sendResponse)).fail((error) => errorHandler(error, sendResponse))\n         return true\n\n      case 'auth':\n         debug.log('Authorizing ...')\n         $.ajax({\n            \"url\": `${API_DOMAIN}/auth3`,\n            \"type\": 'POST',\n            \"dataType\": 'json',\n            \"data\": Object.assign(common, {})\n         }).done((res) => doneHandler(res, sendResponse)).fail((error) => errorHandler(error, sendResponse))\n         return true\n\n      case 'spellcheck':\n         debug.log('spellcheck')\n         $.ajax({\n            \"url\": `${API_DOMAIN}/spell2`,\n            \"type\": 'POST',\n            \"dataType\": 'json',\n            \"data\": Object.assign(common, {\n               \"text\": req.text,\n               \"language\": req.language\n            })\n         }).done((res) => doneHandler(res, sendResponse)).fail(() => errorHandler(sendResponse))\n         return true\n\n      case 'openOptionsPage':\n         debug.log('openOptionsPage')\n         if (req.suffix) {\n\n            chrome.tabs.create({\"url\": chrome.runtime.getURL(`html/options.html${req.suffix}`)})\n\n         } else { // Canonical way\n\n            chrome.runtime.openOptionsPage()\n\n         }\n         return true\n\n      case 'clickReport':\n         debug.log('clickReport')\n         $.ajax({\n            \"url\": `${API_DOMAIN}/clickReport`,\n            \"type\": 'POST',\n            \"data\": Object.assign(common, {\"body\": req.body})\n         }).done((res) => doneHandler(res, sendResponse)).fail(() => errorHandler(sendResponse))\n         return true\n\n      case 'storage':\n         debug.log('storage')\n         switch (req.type) {\n            case 'get':\n               Storage.get({\"storeName\": req.name}, req.key, sendResponse)\n               return true\n            case 'set':\n               Storage.set({\"storeName\": req.name}, req.key, req.value, sendResponse)\n               return true\n            case 'keys':\n               Storage.keys({\"storeName\": req.name}, sendResponse)\n               return true\n            case 'remove':\n               Storage.remove({\"storeName\": req.name}, req.key, sendResponse)\n         }\n         return true\n      case 'tcLookup':\n         handleTcRequest()\n\n   }\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/background.js","/* global chrome */\n\nconst debug = require('cth-debug')(__filename)\n\nfunction getChromeVersion() {\n\n   const raw = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)\n\n   return raw ? parseInt(raw[2], 10) : false\n\n}\n\nfunction getExtensionVersion() {\n\n   return chrome.runtime.getManifest().version\n\n}\n\nfunction doneHandler(res, sendResponse) {\n\n   debug.warn('Sending response to content page...')\n   debug.log(res)\n   sendResponse(res)\n\n}\n\nfunction errorHandler(error, sendResponse) {\n\n   debug.log('Error was handled ...')\n   debug.log(error)\n   sendResponse(null)\n\n}\n\nexport {getChromeVersion, getExtensionVersion, errorHandler, doneHandler}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/background/helpers.js","/*\n * TODO: Add a reactive layout, which changes the contents according to what's most appropriate -- e.g. removing descriptions when made small.\n * TODO: Allow for sorting according to these criteria:\n * 1. Alphabetically.\n * 2. Custom sorting according to product name as selected by user, with persistence!\n * E.g. if product is \"Docs\", then let's assume \"Gmail\" is considered relevant. But sometimes they might include some random other glossaries which are not useful. The user should be able to select listing order for each products. So e.g.:\n * Docs: Gmail, YouTube\n * AdWords: AdSense, AdGrants, etc.\n */\n\n/*\n * HOWTO reorder elements in DOM: http://jsfiddle.net/vexw5/6/\n * or I could just use arrays in React\n */\n\nimport $ from 'jquery'\nimport persistFontSize from './putGlossariesInWindow/persistFontSize'\nimport {getBody, getHead} from './putGlossariesInWindow/htmlHeadBody'\nimport hideDefinitionsStuff from './putGlossariesInWindow/hideDefinitionsStuff'\nimport removeAndUpdateDatastore from './putGlossariesInWindow/removeAndUpdateDatastore'\n\nconst debug = require('cth-debug')(__filename)\n\nfunction putGlossariesInWindow(content) {\n\n   // Notez: might not work well on small viewports due to screen.height - 840\n   if (!window.wind) {\n\n      if (!content) {\n\n         window.wind = window.open('', 'Title', `toolbar=no, location=no, directories=no, status=yes, menubar=1, scrollbars=yes, resizable=yes, width=780, height=1000, top=${screen.height - 400}, left=${screen.width - 840}`)\n         window.wind.document.head.innerHTML = getHead()\n         window.wind.document.body.innerHTML = 'No glossary matches available.'\n\n      } else if (content) {\n\n         window.wind = window.open('', 'Title', `toolbar=no, location=no, directories=no, status=yes, menubar=1, scrollbars=yes, resizable=yes, width=780, height=1000, top=${screen.height - 400}, left=${screen.width - 840}`)\n         window.wind.document.head.innerHTML = getHead()\n\n      }\n\n   }\n\n   $(window.wind).on('beforeunload', () => {\n\n      window.wind = undefined\n\n   })\n\n   if (content) {\n\n      try {\n\n         window.wind.document.body.innerHTML = getBody(content)\n\n      } catch (e) {\n\n         debug.warn(e)\n\n      }\n\n   }\n\n   try {\n\n      $(window.wind.document.body).find('.cth-NEW').click(removeAndUpdateDatastore)\n      $(window.wind.document.body).find('.cth-CHANGE').click(removeAndUpdateDatastore)\n\n      hideDefinitionsStuff(window.wind.document)\n      persistFontSize(window.wind.document)\n\n   } catch (e) {\n\n      debug.warn(e)\n\n   }\n\n   window.wind.blur()\n\n}\n\nexport default putGlossariesInWindow\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/background/putGlossariesInWindow.js","// Copyright © 2017 Eirik Birkeland. All rights reserved.\n/**\n * Created by Eirik on 12.07.2017.\n */\nimport $ from 'jquery'\n\nlet count = 0\n\nexport default function persistFontSize(doc) {\n\n   const $incr = $(doc).find('#cth-incr')\n   const $decr = $(doc).find('#cth-decr')\n   const $body = $(doc).find('body')\n\n   const get = () => localStorage['cth-stored-font-size']\n   // Noinspection AssignmentResultUsedJS\n   const put = (numPx) => {\n\n      localStorage['cth-stored-font-size'] = numPx\n\n   }\n\n   const storedSize = get()\n   if (storedSize) {\n\n      $body.css({'font-size': `${storedSize}px`})\n\n   }\n\n   $incr.click(() => _change('incr'))\n   $decr.click(() => _change('decr'))\n\n   function _change(symbol) {\n\n      if (symbol !== 'incr' && symbol !== 'decr') {\n\n         return\n\n      }\n\n      let fontSize = parseInt($body.css('font-size'))\n      const modifier = symbol === 'incr' ? +2 : -2\n\n      fontSize += modifier\n\n      // There's no reason to ever go below font size 1:\n      if (fontSize < 0) {\n\n         fontSize = 1\n         count++\n\n      }\n\n      $body.css({'font-size': `${fontSize}px`})\n      put(fontSize)\n\n   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/background/putGlossariesInWindow/persistFontSize.js","// Copyright © 2017 Eirik Birkeland. All rights reserved.\n/**\n * Created by Eirik on 12.07.2017.\n */\n\n/*\n * TODO: Change the numbers 1, 2, 3 - they are not needed.\n * TODO: Create a new view where items are listed according to product first!\n * e.g.\n * AdWordsUpdated\n * --------------\n * eligible - kvalifisert (noun)\n * IF - HVIS other\n */\n\nexport const getHead = function () {\n\n   return `<head>\n    <title>Detached Glossaries</title>\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"\n          integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\" crossorigin=\"anonymous\">\n\n    <style>\n        body {\n            font-size: 14px\n        }\n\n        .cth-spacious {\n            margin: 5px\n        }\n\n        .gtc-glossary-pos {\n            font-family: monospace\n        }\n\n        .gtc-glossary-sourceterm {\n            display: inline-block\n            *zoom: 1\n            *display: inline\n            width: 20%\n            vertical-align: top\n            color: red\n        }\n\n        .gtc-glossary-source {\n            color: #666\n            vertical-align: top\n        }\n\n        .gtc-glossary-terms {\n            clear: both\n            display: block\n            padding-bottom: 0.5em\n        }\n\n        .gtc-glossary-translation, .gtc-glossary-pos {\n            font-family: monospace\n        }\n\n        .gtc-glossary-translation {\n            font-size: larger\n            display: inline-block\n            vertical-align: top\n            font-weight: bold\n        }\n\n        .gtc-glossary-pos, .gtc-glossary-language {\n            font-style: italic\n            display: inline-block\n            vertical-align: top\n            font-size: smaller\n            color: #666\n        }\n\n        .gtc-glossary-description {\n            vertical-align: top\n            clear: both\n            display: block\n        }\n    </style>\n</head>`\n\n}\n\nexport const getBody = function (content) {\n\n   return `<body>\n                    <div style=\"margin:3px\" class=\"btn-group\" role=\"group\">\n                        <button type=\"button\" title=\"Increae font size\" class=\"btn btn-default\" id=\"cth-incr\">\n                            <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\n                        </button>\n                        <button type=\"button\" title=\"Decrease font size\" class=\"btn btn-default\" id=\"cth-decr\">\n                            <span class=\"glyphicon glyphicon-minus\" aria-hidden=\"true\"></span>\n                        </button>\n                        <button type=\"button\" title=\"Toggle descriptions\" class=\"btn btn-default\" id=\"cth-compress\">\n                            <span class=\"glyphicon glyphicon-compressed\" aria-hidden=\"true\"></span>\n                        </button>\n                    </div>\n                    ${content || 'No glossary matches available.'}\n                </body>`\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/background/putGlossariesInWindow/htmlHeadBody.js","import $ from 'jquery'\n\nlet state = false\n\nexport default function hideDefinitionsStuff(doc) {\n\n   const stored = localStorage['cth-stored-descriptions-state']\n   const $desc = $(doc).find('.gtc-glossary-description')\n   const $cthCompress = $(doc).find('#cth-compress')\n\n   if (stored === 'true') {\n\n      state = true\n      $desc.hide()\n\n   }\n\n   $cthCompress.click(() => {\n\n      state = !state\n      $desc.toggle()\n      localStorage['cth-stored-descriptions-state'] = state\n\n   })\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/background/putGlossariesInWindow/hideDefinitionsStuff.js","// Copyright © 2017 Eirik Birkeland. All rights reserved.\n/**\n * Created by Eirik on 12.07.2017.\n */\nimport $ from 'jquery'\nimport localforage from 'localforage'\n\nconst NewStorage = localforage.createInstance({\"name\": 'glossaries'})\n\nexport default function removeAndUpdateDatastore() {\n\n   this.remove()\n   //  Logger.log($(this).attr('data-database-name'))\n\n   NewStorage.getItem($(this).attr('data-database-name')).then((existingEntry) => {\n\n      // Logger.log(existingEntry)\n\n      existingEntry.lastUpdated = 691200000 // 8 days ago\n      NewStorage.setItem(existingEntry.keyName, existingEntry).then((res) => {\n         //  Logger.log(res)\n      })\n\n   })\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/background/putGlossariesInWindow/removeAndUpdateDatastore.js","import Fingerprintjs2 from 'fingerprintjs2'\n\nexport default function getFingerprint(cb) {\n\n   new Fingerprintjs2().get((result, components) => {\n\n      cb(result) // A hash, representing your device fingerprint\n\n   })\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/background/background/getFingerprint.js","/* global chrome */\nimport {handleTcRequest} from '../handleTcRequest'\n\nconst debug = require('cth-debug')(__filename)\n\n/*\n * Copyright (c) 2010 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * Found in the LICENSE file.\n */\n\n// Create one test item for each context type.\nconst contexts = [\"selection\"]\nconst title = \"Look up phrase in Translation Console\"\n\nchrome.contextMenus.create({\n   title,\n   contexts,\n   \"onclick\": handleTcRequest\n})\n\n\n// WEBPACK FOOTER //\n// ./src/background/contextMenu/index.js","// Copyright © 2017 Eirik Birkeland. All rights reserved.\n/**\n * Created by Eirik on 12.07.2017.\n */\n\n/**\n *\n * @returns {boolean}\n */\nexport default function checkIfGlossaryWindowIsOpen() {\n\n   return Boolean(window.wind)\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/background/putGlossariesInWindow/checkIfGlossaryWindowIsOpen.js","// Copyright © 2016 Eirik Birkeland. All rights reserved.\n/**\n * Created by eb on 25.02.2017.\n */\n\n/* global chrome */\n\n\nfunction getCpuInfo(cb) {\n\n   chrome.system.cpu.getInfo(cb)\n\n}\n\nfunction getMemInfo(cb) {\n\n   chrome.system.memory.getInfo(cb)\n\n}\n\nexport {getCpuInfo, getMemInfo}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/background/systemInfo.js"],"sourceRoot":""}