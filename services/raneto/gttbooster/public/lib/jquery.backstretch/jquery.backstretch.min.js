/*! Backstretch - v2.1.0 - 2015-10-29\n* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2015 Scott Robbin; Licensed MIT */!function(a,b,c){"use strict";a.fn.backstretch=function(c,d){return 0===a(b).scrollTop()&&b.scrollTo(0,0),this.each(function(){var b=a(this),e=b.data("backstretch");if(e){if("string"==typeof arguments[0]&&"function"==typeof e[arguments[0]])return void e[arguments[0]](d);d=a.extend(e.options,d),e.hasOwnProperty("destroy")&&e.destroy(!0)}if(!c||c&&0===c.length){var f=b.css("background-image");f&&"none"!==f?c=[{url:b.css("backgroundImage").replace(/url\(|\)|"|'/g,"")}]:a.error("No images were supplied for Backstretch, or element must have a CSS-defined background image.")}e=new i(this,c,d||{}),b.data("backstretch",e)})},a.backstretch=function(b,c){return a("body").backstretch(b,c).data("backstretch")},a.expr[":"].backstretch=function(b){return a(b).data("backstretch")!==c},a.fn.backstretch.defaults={duration:5e3,fade:0,fadeFirst:!0,alignX:.5,alignY:.5,paused:!1,start:0,preload:2,preloadSize:1,resolutionRefreshRate:2500,resolutionChangeRatioTreshold:.1};var d={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxWidth:"none",zIndex:-999999}},e=function(){var c=function(a){for(var b=1;b<a.length;b++){for(var c=a[b],d=b;a[d-1]&&parseInt(a[d-1].width,10)>parseInt(c.width,10);)a[d]=a[d-1],--d;a[d]=c}return a},d=function(a,c){for(var d,e,f=b.devicePixelRatio||1,g=0,h=0;h<c.length&&(e=c[h],"string"==typeof e&&(e=c[h]={url:e}),e.pixelRatio&&parseFloat(e.pixelRatio)!==f||(g=h,d=a,"auto"===e.pixelRatio&&(a*=f),!(e.width>=d)));h++);return c[Math.min(h,g)]};return function(b,e){for(var f=b.width(),g=b.height(),h=[],i=function(a,b){return"width"===b?f:"height"===b?g:a},j=0;j<e.length;j++)if(a.isArray(e[j])){e[j]=c(e[j]);var k=d(f,e[j]);h.push(k)}else{"string"==typeof e[j]&&(e[j]={url:e[j]});var l=a.extend({},e[j]);l.url=l.url.replace(/{{(width|height)}}/g,i),h.push(l)}return h}}(),f=function(b,c,d,e,f){var g=[],h=function(a){for(var b=0;b<g.length;b++)if(g[b].src===a.src)return g[b];return g.push(a),a},i=function(a,b,c){"function"==typeof b&&b.call(a,c)};return function j(b,c,d,e,f){if("undefined"!=typeof b){a.isArray(b)||(b=[b]),arguments.length<5&&"function"==typeof arguments[arguments.length-1]&&(f=arguments[arguments.length-1]),c="function"!=typeof c&&c?c:0,d="function"==typeof d||!d||0>d?b.length:Math.min(d,b.length),e="function"!=typeof e&&e?e:1,c>=b.length&&(c=0,d=0),0>e&&(e=d),e=Math.min(e,d);var g=b.slice(c+e,d-e);if(b=b.slice(c,e),d=b.length,!d)return void i(b,f,!0);for(var k,l=0,m=function(){l++,l===d&&(i(b,f,!g),j(g,0,0,e,f))},n=0;n<b.length;n++)k=new Image,k.src=b[n].url,k=h(k),k.complete?m():a(k).on("load error",m)}}}(),g=function(b){for(var c=[],d=0;d<b.length;d++)"string"==typeof b[d]?c.push({url:b[d]}):a.isArray(b[d])?c.push(g(b[d])):c.push(h(b[d]));return c},h=function(a,b){return"left"===a.alignX?a.alignX=0:"center"===a.alignX?a.alignX=.5:"right"===a.alignX?a.alignX=1:(a.alignX!==c||b)&&(a.alignX=parseFloat(a.alignX),isNaN(a.alignX)&&(a.alignX=.5)),"top"===a.alignY?a.alignY=0:"center"===a.alignY?a.alignY=.5:"bottom"===a.alignY?a.alignY=1:(a.alignX!==c||b)&&(a.alignY=parseFloat(a.alignY),isNaN(a.alignY)&&(a.alignY=.5)),a},i=function(c,i,k){this.options=a.extend({},a.fn.backstretch.defaults,k||{}),this.firstShow=!0,(this.options.centeredX||this.options.centeredY)&&(b.console&&b.console.log&&b.console.log("jquery.backstretch: `centeredX`/`centeredY` is deprecated, please use `alignX`/`alignY`"),this.options.centeredX&&(this.options.alignX=.5),this.options.centeredY&&(this.options.alignY=.5)),h(this.options,!0),this.images=g(a.isArray(i)?i:[i]),this.options.paused&&(this.paused=!0),this.options.start>=this.images.length&&(this.options.start=this.images.length-1),this.options.start<0&&(this.options.start=0),this.isBody=c===document.body;var l=a(b);this.$container=a(c),this.$root=this.isBody?j?l:a(document):this.$container,this.originalImages=this.images,this.images=e(this.options.alwaysTestWindowResolution?l:this.$root,this.originalImages),f(this.images,this.options.start||0,this.options.preload||1);var m=this.$container.children(".backstretch").first();if(this.$wrap=m.length?m:a('<div class="backstretch"></div>').css(this.options.bypassCss?{}:d.wrap).appendTo(this.$container),!this.options.bypassCss){if(!this.isBody){var n=this.$container.css("position"),o=this.$container.css("zIndex");this.$container.css({position:"static"===n?"relative":n,zIndex:"auto"===o?0:o,background:"none"}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&j?"fixed":"absolute"})}this.index=this.options.start,this.show(this.index),l.on("resize.backstretch",a.proxy(this.resize,this)).on("orientationchange.backstretch",a.proxy(function(){this.isBody&&0===b.pageYOffset&&(b.scrollTo(0,1),this.resize())},this))};i.prototype={resize:function(){try{var d=this.options.alwaysTestWindowResolution?a(b):this.$root,g=d.width(),h=d.height(),i=g/(this._lastResizeContainerWidth||0),j=h/(this._lastResizeContainerHeight||0),k=this.options.resolutionChangeRatioTreshold||0;if((g!==this._lastResizeContainerWidth||h!==this._lastResizeContainerHeight)&&(Math.abs(i-1)>=k||isNaN(i)||Math.abs(j-1)>=k||isNaN(j))&&(this._lastResizeContainerWidth=g,this._lastResizeContainerHeight=h,this.images=e(d,this.originalImages),this.options.preload&&f(this.images,(this.index+1)%this.images.length,this.options.preload),1===this.images.length&&this._currentImage!==this.images[0])){var l=this;clearTimeout(l._selectAnotherResolutionTimeout),l._selectAnotherResolutionTimeout=setTimeout(function(){l.show(0)},this.options.resolutionRefreshRate)}var m,n={left:0,top:0,right:"auto",bottom:"auto"},o=this.isBody?this.$root.width():this.$root.innerWidth(),p=o,q=this.isBody?b.innerHeight?b.innerHeight:this.$root.height():this.$root.innerHeight(),r=p/this.$img.data("ratio"),s=a.Event("backstretch.resize",{relatedTarget:this.$container[0]}),t=this._currentImage.alignX===c?this.options.alignX:this._currentImage.alignX,u=this._currentImage.alignY===c?this.options.alignY:this._currentImage.alignY;r>=q?n.top=-(r-q)*u:(r=q,p=r*this.$img.data("ratio"),m=(p-o)/2,n.left=-(p-o)*t),this.options.bypassCss||this.$wrap.css({width:o,height:q}).find("img:not(.deleteable)").css({width:p,height:r}).css(n),this.$container.trigger(s,this)}catch(v){}return this},show:function(b){if(!(Math.abs(b)>this.images.length-1)){var e=this,f=e.$wrap.find("img").addClass("deleteable"),g={relatedTarget:e.$container[0]};e.$container.trigger(a.Event("backstretch.before",g),[e,b]),this.index=b,clearTimeout(e._cycleTimeout),e.$img=a("<img />"),this.options.bypassCss?e.$img.css({display:"none"}):e.$img.css(d.img),e.$img.bind("load",function(d){var h=a(this),i=this.width||a(d.target).width(),j=this.height||a(d.target).height();h.data("ratio",i/j);var k=h.data("options").fade!==c?h.data("options").fade:e.options.speed||e.options.fade,l=function(){f.remove(),!e.paused&&e.images.length>1&&e.cycle(),a(["after","show"]).each(function(){e.$container.trigger(a.Event("backstretch."+this,g),[e,b])})};e.firstShow&&!e.options.fadeFirst||!k?(a(this).show(),l()):a(this).fadeIn(k,l),e.firstShow=!1,e.resize()}).appendTo(e.$wrap);var h=e.images[b];return e.$img.attr("src",h.url),e.$img.attr("alt",h.alt||""),e.$img.data("options",h),e._currentImage=h,e}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.cycle(),this},cycle:function(){if(this.images.length>1){clearTimeout(this._cycleTimeout);var b=this._currentImage&&this._currentImage.duration||this.options.duration;this._cycleTimeout=setTimeout(a.proxy(function(){this.paused||this.next()},this),b)}return this},destroy:function(c){a(b).off("resize.backstretch orientationchange.backstretch"),clearTimeout(this._cycleTimeout),c||this.$wrap.remove(),this.$container.removeData("backstretch")}};var j=function(){var a=navigator.userAgent,c=navigator.platform,d=a.match(/AppleWebKit\/([0-9]+)/),e=!!d&&d[1],f=a.match(/Fennec\/([0-9]+)/),g=!!f&&f[1],h=a.match(/Opera Mobi\/([0-9]+)/),i=!!h&&h[1],j=a.match(/MSIE ([0-9]+)/),k=!!j&&j[1];return!((c.indexOf("iPhone")>-1||c.indexOf("iPad")>-1||c.indexOf("iPod")>-1)&&e&&534>e||b.operamini&&"[object OperaMini]"==={}.toString.call(b.operamini)||h&&7458>i||a.indexOf("Android")>-1&&e&&533>e||g&&6>g||"palmGetResource"in b&&e&&534>e||a.indexOf("MeeGo")>-1&&a.indexOf("NokiaBrowser/8.5.0")>-1||k&&6>=k)}()}(jQuery,window);